<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Shawty Shop | ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" />
</head>

<body>
  <!-- üîπ Navbar -->
  <header class="navbar">
    <div class="navbar-top">
      <div class="logo">
        <img src="../assets/image/star icon.jpg" alt="logo">
        <h1>Shawty Shop</h1>
      </div>

      <div class="nav-icons">
        <a id="cart-btn" class="cart-icon" role="button" aria-label="cart">
          <i class="bi bi-cart3"></i>
          <span id="cart-count">0</span>
        </a>
        <a id="profile-link" class="profile-icon" role="button" aria-label="profile">
          <i class="bi bi-person-circle"></i>
        </a>
      </div>
    </div>

    <nav class="navbar-bottom">
      <a href="index.html" class="active">HOME</a>
      <a href="all.html">ALL</a>
    </nav>
  </header>

  <!-- üîπ Section: ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ -->
  <main class="container">
    <h1 class="section-title">üî• ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</h1>
    <div id="product-grid" class="product-grid"></div>
  </main>

  <!-- üîπ Popup ‡∏£‡∏ñ‡πÄ‡∏Ç‡πá‡∏ô -->
  <div id="cart-popup" class="cart-popup hidden">
    <div class="cart-content">
      <button id="close-cart" class="close-btn" aria-label="close cart">&times;</button>
      <h2>‡∏£‡∏ñ‡πÄ‡∏Ç‡πá‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</h2>
      <div id="cart-items" class="cart-items"></div>
      <div class="cart-buttons">
        <button id="checkout-btn" class="btn green">‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</button>
        <button id="clear-cart" class="btn red">‡∏•‡πâ‡∏≤‡∏á‡∏£‡∏ñ‡πÄ‡∏Ç‡πá‡∏ô</button>
      </div>
    </div>
  </div>

  <!-- üîπ Toast -->
  <div id="toast" class="toast"></div>

  <!-- ===========================
       Script: ‡∏£‡∏ñ‡πÄ‡∏Ç‡πá‡∏ô
  ============================ -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const cartBtn = document.getElementById("cart-btn");
      const cartPopup = document.getElementById("cart-popup");
      const closeCart = document.getElementById("close-cart");

      if (!cartBtn || !cartPopup || !closeCart) return;

      cartBtn.addEventListener("click", () => cartPopup.classList.remove("hidden"));
      closeCart.addEventListener("click", () => cartPopup.classList.add("hidden"));
      cartPopup.addEventListener("click", (e) => {
        if (e.target.id === "cart-popup") cartPopup.classList.add("hidden");
      });
    });
  </script>

  <!-- ===========================
       Script: ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
  ============================ -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const productGrid = document.getElementById("product-grid");
      const products = JSON.parse(localStorage.getItem("products")) || [];
      const featured = products.filter(p => p.page === "index" || p.page === "both");

      if (featured.length === 0) {
        productGrid.innerHTML = `<p class="text-center text-gray-500">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</p>`;
        return;
      }

      productGrid.innerHTML = featured.map(p => `
        <div class="product-card">
          <img src="${p.image}" alt="${p.name}">
          <h2>${p.name}</h2>
          <p>‡∏ø${p.price}</p>
          <button class="add-to-cart">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏á‡∏£‡∏ñ‡πÄ‡∏Ç‡πá‡∏ô</button>
        </div>
      `).join("");
    });
  </script>

  <!-- ===========================
       Script: ‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå ‚Üí ‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ profile/login ‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
  ============================ -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const profileLink = document.getElementById("profile-link");
      if (!profileLink) return;

      profileLink.addEventListener("click", () => {
        const user = JSON.parse(localStorage.getItem("user"));
        window.location.href = user ? "profile.html" : "login.html";
      });
    });
  </script>
</body>
</html>
